---
date: 2019-10-28 20:26:50+08:00
layout: post
title: OpenCV使用笔记
categories: 技术随笔
tags: 图像处理
---

OpenCV是开源的计算机视觉库，封装了很多图像处理操作和算法，用C++编写，可以用Python进行调用。这里主要就操作做一个整理。

# 基本操作

## 读写

以下代码读取MyPic.png这一文件并另存为jpg格式。

```python
import cv2
image = cv2.imread('MyPic.png')
cv2.imwrite('MyPic.jpg', image)
```

imread有两个参数，前一个是文件名，后一个是读取模式，比如cv2.IMREAD_GRAYSCALE（该值为0）是以灰度模式进行读取。

imread默认以24位BGR彩色模式进行读取，保存为一个numpy的三维数组。而如果是8位的灰度模式，则是一个二维数组。

image[2,0,1]表示X坐标为2，Y坐标为0的这一像素的蓝色通道的值。image[:,0]表示y坐标为0时的所有像素。image[:,:,1]表示所有蓝色通道的值。

操作numpy.array还可以用它的item和itemset方法。

指定array的范围以设置兴趣区域：my_roi = img[0:100, 0:100]

image具有shape属性，可以查看宽高。

```
>>> image.shape
(121, 383)
```

## 新建

新建图像就是新建一个numpy array: 

`image = numpy.zeros((400,300), numpy.uint8)`

也可以复制一个现有图像：

`image = img.copy()`

将8位黑白图像转换为24位BGR彩色的：

`image = cv2.cvtColor(img,cv2.COLOR_GRAY2BGR)`

## 显示

```python
cv2.imshow('my image', img) # 显示图像
cv2.waitKey() # 等待用户操作，不然图像窗口会一闪而过
cv2.destroyAllWindows() # 关闭所有窗口
```

默认的窗口不能更改大小，可以在imshow语句前加上下面这句，注意标题要和imshow中的一致：

`cv2.namedWindow("my image",cv2.WINDOW_NORMAL)`

# 几何变换

# 滤镜

# 边缘检测

# 特征抽取

# Seam Carving

# 轮廓检测

# 图像分割

待更新


参考资料：

* OpenCV 3.x with Python By Example
* OpenCV Computer Vision with Python



---
date: 2019-02-14 11:14:50+08:00
layout: post
title: 《麻烦少女》简谱
categories: 随笔
tags: 
---

上次扒谱还是高中时扒的仙剑的[蝶恋](http://blog.sina.com.cn/s/blog_a6938c7a0102vfq2.html)，这次听到《创造101》里的《麻烦少女》，觉得很好听，但是网上搜不到现成的谱子，于是就自己上了。

我学过乐器，所以还算有点音感，听到曲调能唱出大致的音符，如果有吃不准的地方，就对着手机上的调音器软件唱并用乐器验证。手机上的调音软件还是不错的，可以显示唱的哪个音，对应多少频率。

把音符打下来，然后就要考虑节奏等其它因素了，可以直接边打谱边验证。我们这里需要使用打谱软件，常见的有overture、musescore、作曲大师等。打简谱的话，推荐jp-word。

我们先确定每个小节有几拍，也就是确定拍号。这个可以直接听出来，《麻烦少女》的节拍打得还是很清楚的，是4/4。然后确定每个音符的长度以及之间的停顿。

经过不断地听和修改后，得到如下的谱子：

![](/album/trouble_girl.jpg)

这首歌要演唱得好，对节奏的掌握，要求还是挺高的，对于杨超越的确有难度。所以，节目里我们可以看到许诗茵拍了她肩膀两下，对应谱子里第二个哎呀后面的两个休止符。

<video src="https://github.com/xulihang/resources/releases/download/v1.0/trouble_girl.mp4" controls="controls">
您的浏览器不支持 video 标签。
</video>

再说说计算机自动扒谱。自动扒谱还是很有难度的，有一些商业软件已经实现了这一功能。Logic Pro X可以根据音乐生成midi，这样再用midi转乐谱比较简单。

一篇文章介绍了如何使用卷积神经网络扒谱：[Music Transcription with Convolutional Neural Networks](https://www.lunaverus.com/cnn)。

不过，全自动的操作不一定靠谱，大多数还是机器辅助人来进行扒谱。除了上面提到的手机调音软件，还可以利用傅里叶变换生成频谱图以供借鉴。人自己听音去扒谱，可以提高技能，同时也有很大的成就感。

我这里扒的《麻烦少女》的主旋律，其它的什么和弦部分就没有涉及。如果是复调古典音乐，那就更加复杂了。

下图是Praat生成的频谱图：

![](http://wx1.sinaimg.cn/mw1024/a6938c7aly1g3p4sdxp1cj20p20hndk8.jpg)

### 2019/06/04更新

最近了解了一些调音软件，比如melodyne。它可以自动根据音频识别音符，并导出midi文件。之后用musescore等打谱软件，可以转换midi为谱子。

不过识别对音频的要求比较高，最好是清晰的主旋律。歌曲的伴奏也会被识别进去，所以最好能先提取人声。人的话自然而然就能识别伴奏和人声，但对机器则比较困难。

![](/album/music/melodyne.JPG)

至于识别的原理，我在网上找了一个音符频率对应表（[来源](https://zhidao.baidu.com/question/228414943.html)），或许识别音符只需根据频率就行。不过乐器的频率比较稳定，人的哼唱就不是很稳定，经常有很多音被识别为半音。 

```
音符 频率/HZ 半周期/us(N) 
--------------------------------
低1DO 262 1908 #1DO# 277 1805
低2RE 294 1700 #2RE# 311 1608
低3MI 330 1516 #3MI# 340 1470
低4FA 349 1433 #4FA# 370 1350
低5SO 392 1276 #5SO# 415 1205
低6LA 440 1136 #6LA# 466 1072
低7SI 494 1012 #7SI# 524 0954

中1DO 523 0956 #1DO# 554 0903
中2RE 578 0842 #2RE# 622 0804
中3MI 659 0759 #3MI# 682 0733
中4FA 698 0716 #4FA# 740 0676
中5SO 784 0638 #5SO# 831 0602
中6LA 880 0568 #6LA# 932 0536
中7SI 988 0506 #7SI# 1046 478

高1DO 1046 478 #1DO# 1109 451
高2RE 1175 426 #2RE# 1245 402
高3MI 1318 372 #3MI# 1356 368
高4FA 1397 358 #4FA# 1480 338
高5SO 1568 319 #5S0# 1661 292
高6LA 1760 284 #6LA# 1865 268
高7SI 1976 253 #7SI# 2066 242
```






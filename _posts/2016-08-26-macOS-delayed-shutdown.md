---
date: 2016-08-26 12:52:50+08:00
layout: post
title: macOS设置延时关机启动项
categories: 技术随笔
tags: macOS
---
 
因为新配的黑苹果所用的h61主板不支持网络启动，所以只能使用定时开机(resume by time)。但我平时可能不需要用到这台黑苹果，让它以40几瓦的功率运行实在费电，所以想设置开机后即定时关机。我想要用的那天，在机器尚在运行的时候运行解除关机的命令就可以了。

一般思路是使用launchd，但测试失败，我放弃继续研究这个，使用了另一使用macOS系统自带的设置启动项的办法。

操作如下：

1、新建一个shell脚本如下：

```
#!/bin/bash
echo password | sudo -S shutdown -h +30
```

以上命令执行30分钟后关机的操作。因为默认用户的登录项运行没有root权限，要使用sudo。然后用echo和sudo的-S选项自动输入sudo密码。

2、设置默认使用终端运行shell脚本

右键shell脚本，显示简介，里面的打开方式设置为终端。

3、设置启动项

在系统偏好设置-用户与群组-登录项里添加。

以上